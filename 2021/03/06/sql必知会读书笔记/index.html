<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.1.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="sqtitle: sql必知会读书笔记date: 2019-07-24 11:53:46tags: sqlcategories: 数据库  sql是什么 SQL （发音为字母 S-Q-L 或 sequel ）是结构化查询语言（ Structured Query Language ）的缩写。 SQL 是一种专门用来与数据库沟通的语言。  为什么 设计 SQL 的目的是很好地完成一项任务 —— 提供一">
<meta property="og:type" content="article">
<meta property="og:title" content="lkgBlog">
<meta property="og:url" content="https://lkggithub.github.io/2021/03/06/sql%E5%BF%85%E7%9F%A5%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="lkgBlog">
<meta property="og:description" content="sqtitle: sql必知会读书笔记date: 2019-07-24 11:53:46tags: sqlcategories: 数据库  sql是什么 SQL （发音为字母 S-Q-L 或 sequel ）是结构化查询语言（ Structured Query Language ）的缩写。 SQL 是一种专门用来与数据库沟通的语言。  为什么 设计 SQL 的目的是很好地完成一项任务 —— 提供一">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-06T06:39:57.012Z">
<meta property="article:modified_time" content="2021-03-06T06:39:57.013Z">
<meta property="article:author" content="lkg">
<meta name="twitter:card" content="summary">





  
  
  <link rel="canonical" href="https://lkggithub.github.io/2021/03/06/sql%E5%BF%85%E7%9F%A5%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title> | lkgBlog</title>
  






  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f9967890e888a3bfd99eab89c1f47c97";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>







  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lkgBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br/>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br/>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lkggithub.github.io/2021/03/06/sql%E5%BF%85%E7%9F%A5%E4%BC%9A%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lkg"/>
      <meta itemprop="description" content=""/>
      <meta itemprop="image" content="/images/avatar.gif"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lkgBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-03-06 14:39:57" itemprop="dateCreated datePublished" datetime="2021-03-06T14:39:57+08:00">2021-03-06</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>sqtitle: sql必知会读书笔记<br>date: 2019-07-24 11:53:46<br>tags: sql<br>categories: 数据库</p>
<ol>
<li><p>sql是什么</p>
<p>SQL （发音为字母 S-Q-L 或 sequel ）是结构化查询语言（ Structured Query Language ）的缩写。 SQL 是一种专门用来与数据库沟通的语言。</p>
</li>
<li><p>为什么</p>
<p>设计 SQL 的目的是很好地完成一项任务 —— <strong>提供一种从数据库中读写数据的简单有效的方法。</strong></p>
<p>标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL 。</p>
</li>
</ol>
<h1 id="1-数据库基础"><a href="#1-数据库基础" class="headerlink" title="1. 数据库基础"></a>1. 数据库基础</h1><h2 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h2><ol>
<li>数据库（database）<br>保存有组织的数据的容器</li>
<li>表（table）<br>表是一种结构化的文件，可用来存储某种特定类型的数据。</li>
<li>模式（schema）<br>关于数据库和表的布局及特性的信息。这些特性定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。</li>
<li>列（ column ）<br>表中的一个字段。所有表都是由一个或多个列组成的。</li>
<li>数据类型<br>所允许的数据的类型。每个表列都有相应的数据类型，它限制（或允许）该列中存储的数据。</li>
</ol>
<p><strong>注意：数据类型兼容</strong><br>数据类型及其名称是 SQL 不兼容的一个主要原因。虽然大多数基本数据类型得到了一致的支持，但许多高级的数据类型却没有。更糟的是，<br>偶然会有相同的数据类型在不同的 DBMS 中具有不同的名称。</p>
<ol start="6">
<li><p>行（row）</p>
<p>表中的一个记录。表中的数据是按行存储的，所保存的每个记录存储在自己的行内。</p>
</li>
<li><p>主键（ primary key ）<br> 一列（或一组列），其值能够唯一标识表中每一行。</p>
<p> <strong>主键的条件：</strong></p>
<blockquote>
<ol>
<li>任意两行都不具有相同的主键值；</li>
<li>每一行都必须具有一个主键值（主键列不允许NULL值）；</li>
<li>主键列中的值不允许修改或更新；</li>
<li>主键值不能重用（如果某行从表中删除，它的主键不能赋给以后的新行）。</li>
</ol>
</blockquote>
</li>
</ol>
<h1 id="2-检索数据"><a href="#2-检索数据" class="headerlink" title="2. 检索数据"></a>2. 检索数据</h1><p>提示：</p>
<blockquote>
<ol>
<li><p><strong>结束 SQL 语句</strong>。多条 SQL 语句必须以分号（；）分隔。多数 DBMS 不需要在单条 SQL 语句后加分号。</p>
</li>
<li><p><strong>SQL 语句不区分大小写</strong>，因此SELECT与select是相同的。</p>
</li>
<li><p><strong>使用空格</strong>。在处理 SQL 语句时，其中所有空格都被忽略。</p>
</li>
<li><p><strong>当心逗号</strong>。在选择多个列时，一定要在列名之间加上逗号，但最后一个列名后不加。如果在最后一个列名后加了逗号，将出现错误</p>
</li>
</ol>
</blockquote>
<p>注释：</p>
<p>单行：“#” 开头</p>
<p>多行：/*      */</p>
<h1 id="3-排序检索数据"><a href="#3-排序检索数据" class="headerlink" title="3. 排序检索数据"></a>3. 排序检索数据</h1><p><strong>ORDER BY 子句的位置</strong><br>在指定一条ORDER BY子句时，应该保证它是SELECT语句中<strong>最后一条子句</strong>。如果它不是最后的子句，将会出现错误消息</p>
<h2 id="按多个列排序"><a href="#按多个列排序" class="headerlink" title="按多个列排序"></a>按多个列排序</h2><p>下面的代码检索 3 个列，并按其中两个列对结果进行排序 —— 首先按价格，然后按名称排序。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price, prod_name;</span><br></pre></td></tr></table></figure>

<h2 id="按列位置排序"><a href="#按列位置排序" class="headerlink" title="按列位置排序"></a>按列位置排序</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">2</span>, <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>ORDER BY 2，3表示先按prod_price，再按prod_name进行排序。</p>
<h2 id="指定排序方向"><a href="#指定排序方向" class="headerlink" title="指定排序方向"></a>指定排序方向</h2><p>DESC</p>
<p>DESC关键字只应用到直接位于其前面的列名。</p>
<p>警告：在多个列上降序排序<br>如果想在多个列上进行降序排序，必须对每一列指定DESC关键字。</p>
<h1 id="4-过滤数据"><a href="#4-过滤数据" class="headerlink" title="4. 过滤数据"></a>4. 过滤数据</h1><h2 id="WHERE-子句"><a href="#WHERE-子句" class="headerlink" title="WHERE 子句"></a>WHERE 子句</h2><p>在SELECT语句中，数据根据WHERE子句中指定的搜索条件进行过滤。WHERE子句在表名（FROM子句）之后给出，</p>
<p>警告： WHERE 子句的位置<br>在同时使用ORDER BY和WHERE子句时，应该让ORDER BY位于WHERE之后，否则将会产生错误</p>
<h2 id="WHERE-子句操作符"><a href="#WHERE-子句操作符" class="headerlink" title="WHERE 子句操作符"></a>WHERE 子句操作符</h2><table>
<thead>
<tr>
<th>操作符</th>
<th>说 明</th>
</tr>
</thead>
<tbody><tr>
<td>BETWEEN</td>
<td>在指定的两个值之间</td>
</tr>
<tr>
<td>IS NULL</td>
<td>为 NULL 值</td>
</tr>
<tr>
<td>&lt; &gt;</td>
<td>不等于</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> (vend_id <span class="operator">=</span> <span class="string">&#x27;DLL01&#x27;</span> <span class="keyword">OR</span> vend_id <span class="operator">=</span> ‘BRS01’)</span><br><span class="line"><span class="keyword">AND</span> prod_price <span class="operator">&gt;=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>这条SELECT语句与前一条的唯一差别是，将前两个条件用圆括号括了起来。因为圆括号具有比AND或OR操作符更高的求值顺序，所以 DBMS 首先<br>过滤圆括号内的OR条件。这时， SQL 语句变成了选择由供应商DLL01或BRS01制造的且价格在 10 美元及以上的所有产品，这正是我们希望的结<br>果。</p>
<h3 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h3><p>提示:在WHERE子句中使用圆括号<br>任何时候使用具有AND和OR操作符的WHERE子句，都应该使用圆括号明确地分组操作符。</p>
<h3 id="IN操作符"><a href="#IN操作符" class="headerlink" title="IN操作符"></a>IN操作符</h3><p>为什么要使用IN操作符?其优点为: </p>
<p>在有很多合法选项时，IN操作符的语法更清楚，更直观。 在与其他AND和OR操作符组合使用IN时，求值顺序更容易管理。 IN操作符一般比一组OR操作符执行得更快(在上面这个合法选项很少的例子中，你看不出性能差异)。 IN的最大优点是可以包含其他SELECT语句，能够更动态地建立WHERE子句。 </p>
<h3 id="NOT操作符"><a href="#NOT操作符" class="headerlink" title="NOT操作符"></a>NOT操作符</h3><h1 id="5-用通配符进行过滤"><a href="#5-用通配符进行过滤" class="headerlink" title="5. 用通配符进行过滤"></a>5. 用通配符进行过滤</h1><h2 id="LIKE操作符"><a href="#LIKE操作符" class="headerlink" title="LIKE操作符"></a>LIKE操作符</h2><h3 id="百分号-通配符"><a href="#百分号-通配符" class="headerlink" title="百分号(%)通配符"></a>百分号(%)通配符</h3><p>最常使用的通配符是百分号(%)。在搜索串中，%表示任何字符出现任意次数。</p>
<p><strong>说明:区分大小写</strong><br>根据DBMS的不同及其配置，搜索可以是区分大小写的。如果区分大小写，则’fish%’与Fish bean bag toy就不匹配。</p>
<p><strong>警告:请注意NULL</strong><br>通配符%看起来像是可以匹配任何东西，但有个例外，这就是NULL。子句WHERE prod_name LIKE ‘%’不会匹配产品名称为NULL的行。</p>
<h3 id="下划线-通配符"><a href="#下划线-通配符" class="headerlink" title="下划线(_)通配符"></a>下划线(_)通配符</h3><p>另一个有用的通配符是下划线(_)。下划线的用途与%一样，但它只匹配单个字符，而不是多个字符。</p>
<p>说明:DB2通配符 DB2不支持通配符_。 _</p>
<p>_说明:Access通配符<br> 如果使用的是Microsoft Access，需要使用?而不是_。 </p>
<h3 id="方括号-通配符"><a href="#方括号-通配符" class="headerlink" title="方括号([ ])通配符"></a>方括号([ ])通配符</h3><p>方括号 ([]) 通配符用来指定一个字符集，它必须匹配指定位置(通配符的位置)的一个字符。</p>
<h2 id="使用通配符的技巧"><a href="#使用通配符的技巧" class="headerlink" title="使用通配符的技巧"></a>使用通配符的技巧</h2><ul>
<li><p>不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。</p>
</li>
<li><p>在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处。把通配符置于开始处，搜索起来是最慢的。</p>
</li>
<li><p>仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。</p>
</li>
</ul>
<h1 id="7-计算字段"><a href="#7-计算字段" class="headerlink" title="7.计算字段"></a>7.计算字段</h1><p> CustomersCustomers</p>
<h2 id="拼接字段"><a href="#拼接字段" class="headerlink" title="拼接字段"></a>拼接字段</h2><h2 id="执行算数计算"><a href="#执行算数计算" class="headerlink" title="执行算数计算"></a>执行算数计算</h2><p>加减乘除（+    -    *    /）</p>
<h1 id="8-使用数据处理函数"><a href="#8-使用数据处理函数" class="headerlink" title="8. 使用数据处理函数"></a>8. 使用数据处理函数</h1><p><strong>DBMS 函数的差异</strong></p>
<table>
<thead>
<tr>
<th align="left">函　 数</th>
<th>语　　法</th>
</tr>
</thead>
<tbody><tr>
<td align="left">提取字符串的组成部分</td>
<td>Access 使用 MID() ； DB2 、 Oracle 、 PostgreSQL 和 SQLite 使用 SUBSTR() ； MySQL 和 SQL Server 使用 SUBSTRING()</td>
</tr>
<tr>
<td align="left">数据类型转换</td>
<td>Access 和 Oracle 使用多个函数，每种类型的转换有一个函数； DB2 和 PostgreSQL 使用 CAST() ； MariaDB 、 MySQL 和 SQL Server 使用<br/>CONVERT()</td>
</tr>
<tr>
<td align="left">取当前日期</td>
<td>Access 使用 NOW() ； DB2 和 PostgreSQL 使用 CURRENT_DATE ； MariaDB 和 MySQL 使用 CURDATE() ； Oracle 使用 SYSDATE ； SQL Server<br/>使用 GETDATE() ； SQLite 使用 DATE()</td>
</tr>
</tbody></table>
<h2 id="常用的文本处理函数"><a href="#常用的文本处理函数" class="headerlink" title="常用的文本处理函数"></a>常用的文本处理函数</h2><table>
<thead>
<tr>
<th>函　　数</th>
<th>说　　明</th>
</tr>
</thead>
<tbody><tr>
<td>LEFT() （或使用子字符串函数）</td>
<td>返回字符串左边的字符</td>
</tr>
<tr>
<td>LENGTH() （也使用 DATALENGTH() 或 LEN() ）</td>
<td>返回字符串的长度</td>
</tr>
<tr>
<td>LOWER() （ Access 使用 LCASE() ）</td>
<td>将字符串转换为小写</td>
</tr>
<tr>
<td>LTRIM()</td>
<td>去掉字符串左边的空格</td>
</tr>
<tr>
<td>RIGHT() （或使用子字符串函数）</td>
<td>返回字符串右边的字符</td>
</tr>
<tr>
<td>RTRIM()</td>
<td>去掉字符串右边的空格</td>
</tr>
<tr>
<td>SOUNDEX()</td>
<td>返回字符串的 SOUNDEX 值</td>
</tr>
<tr>
<td>UPPER() （ Access 使用 UCASE() ）</td>
<td>将字符串转换为大写</td>
</tr>
</tbody></table>
<h2 id="数值处理函数"><a href="#数值处理函数" class="headerlink" title="数值处理函数"></a>数值处理函数</h2><table>
<thead>
<tr>
<th>函　　数</th>
<th>说　　明</th>
</tr>
</thead>
<tbody><tr>
<td>ABS()</td>
<td>返回一个数的绝对值</td>
</tr>
<tr>
<td>COS()</td>
<td>返回一个角度的余弦</td>
</tr>
<tr>
<td>EXP()</td>
<td>返回一个数的指数值</td>
</tr>
<tr>
<td>PI()</td>
<td>返回圆周率</td>
</tr>
<tr>
<td>SIN()</td>
<td>返回一个角度的正弦</td>
</tr>
<tr>
<td>SQRT()</td>
<td>返回一个数的平方根</td>
</tr>
<tr>
<td>TAN()</td>
<td>返回一个角度的正切</td>
</tr>
</tbody></table>
<h1 id="9-聚集函数"><a href="#9-聚集函数" class="headerlink" title="9. 聚集函数"></a>9. 聚集函数</h1><p>SQL 聚集函数</p>
<table>
<thead>
<tr>
<th>函　　数</th>
<th>说　　明</th>
</tr>
</thead>
<tbody><tr>
<td>AVG()</td>
<td>返回某列的平均值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>返回某列的行数</td>
</tr>
<tr>
<td>MAX()</td>
<td>返回指定列的最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>返回某列的最小值</td>
</tr>
<tr>
<td>SUM()</td>
<td>返回某列值之和</td>
</tr>
</tbody></table>
<h2 id="AVG（）"><a href="#AVG（）" class="headerlink" title="AVG（）"></a><strong>AVG（）</strong></h2><p>警告：只用于单个列 </p>
<p><strong>AVG()</strong>只能用来确定特定数值列的平均值，而且列名必须作为函数参数给出。为了获得多个列的平均值，必须使用多个AVG()函数。</p>
<p>AVG()函数忽略列值为NULL的行。</p>
<h2 id="count"><a href="#count" class="headerlink" title="count"></a>count</h2><p>使用COUNT(*)对表中行的数目进行计数，不管表列中包含的是空值（NULL）还是非空值。 </p>
<p>使用COUNT(column)对特定列中具有值的行进行计数，忽略NULL值。</p>
<h2 id="MAX-函数"><a href="#MAX-函数" class="headerlink" title="MAX()函数"></a><strong>MAX()</strong>函数</h2><p>提示：对非数值数据使用MAX() </p>
<p>虽然MAX()一般用来找出最大的数值或日期值，但许多（并非所有）DBMS允许将它用来返回任意列中的最大值，包括返回文本列中的最大 值。在用于文本数据时，MAX()返回按该列排序后的最后一行。</p>
<p>说明：NULL值 </p>
<p>MAX()函数忽略列值为NULL的行。</p>
<h2 id="MIN-函数"><a href="#MIN-函数" class="headerlink" title="MIN()函数"></a><strong>MIN()</strong>函数</h2><h2 id="SUM-函数"><a href="#SUM-函数" class="headerlink" title="SUM()函数"></a><strong>SUM()</strong>函数</h2><p>SUM()用来返回指定列值的和（总计）。</p>
<h1 id="10-分组数据"><a href="#10-分组数据" class="headerlink" title="10. 分组数据"></a>10. 分组数据</h1><p>在使用GROUP BY子句前，需要知道一些重要的规定。 </p>
<ul>
<li><p>GROUP BY子句可以包含任意数目的列，因而可以对分组进行嵌套，更细致地进行数据分组。 </p>
</li>
<li><p>如果在GROUP BY子句中嵌套了分组，数据将在最后指定的分组上进行汇总。换句话说，在建立分组时，指定的所有列都一起计算（所以不能从个别的列取回数据）。 </p>
</li>
<li><p>GROUP BY子句中列出的每一列都必须是检索列或有效的表达式（但不能是聚集函数）。如果在SELECT中使用表达式，则必须在GROUP BY子句中指定相同的表达式。不能使用别名。 </p>
</li>
<li><p>大多数SQL实现不允许GROUP BY列带有长度可变的数据类型（如文本或备注型字段）。 </p>
</li>
<li><p>除聚集计算语句外，SELECT语句中的每一列都必须在GROUP BY子句中给出。 </p>
</li>
<li><p>如果分组列中包含具有NULL值的行，则NULL将作为一个分组返回。如果列中有多行NULL值，它们将分为一组。 </p>
</li>
<li><p>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。 </p>
</li>
</ul>
<h2 id="过滤分组"><a href="#过滤分组" class="headerlink" title="过滤分组"></a>过滤分组</h2><p>HAVING和WHERE的差别 </p>
<p>WHERE在数据分组前进行过滤，HAVING在数据分组后进行过滤。这是一个重要的区别，WHERE排除的行不包括在分组 中。这可能会改变计算值，从而影响HAVING子句中基于这些值过滤掉的分组。</p>
<p>使用HAVING时应该结合GROUP BY子句，而WHERE子句用于标准的行级过滤。</p>
<h2 id="分组和排序"><a href="#分组和排序" class="headerlink" title="分组和排序"></a>分组和排序</h2><h1 id="18-视图"><a href="#18-视图" class="headerlink" title="18. 视图"></a>18. 视图</h1><p>视图为虚拟的表。它们包含的不是数据而是根据需要检索数据的查询。视图提供了一种封装SELECT语句的层次，可用来简化数据处理，重新格 式化或保护基础数据。</p>
<h2 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h2><p>视图是虚拟的表。与包含数据的表不一样，视图只包含使用时动态检索数据的查询。</p>
<h2 id="为什么"><a href="#为什么" class="headerlink" title="为什么"></a>为什么</h2><ol>
<li><p>重用SQL语句。 </p>
</li>
<li><p>简化复杂的SQL操作。在编写查询后，可以方便地重用它而不必知道其基本查询细节。 </p>
</li>
<li><p>使用表的一部分而不是整个表。 </p>
</li>
<li><p>保护数据。可以授予用户访问表的特定部分的权限，而不是整个表的访问权限。 </p>
</li>
<li><p>更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。</p>
</li>
</ol>
<p><strong>警告：性能问题</strong></p>
<blockquote>
<p>因为视图不包含数据，所以每次使用视图时，都必须处理查询执行时需要的所有检索。如果你用多个联结和过滤创建了复杂的视图或者嵌套 了视图，性能可能会下降得很厉害。因此，在部署使用了大量视图的应用前，应该进行测试。</p>
</blockquote>
<h2 id="视图的规则和限制"><a href="#视图的规则和限制" class="headerlink" title="视图的规则和限制"></a>视图的规则和限制</h2><ul>
<li><p>与表一样，视图必须唯一命名（不能给视图取与别的视图或表相同的名字）。 </p>
</li>
<li><p>对于可以创建的视图数目没有限制。 </p>
</li>
<li><p>创建视图，必须具有足够的访问权限。这些权限通常由数据库管理人员授予。 </p>
</li>
<li><p>视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造视图。所允许的嵌套层数在不同的DBMS中有所不同（嵌套视图可能会严 </p>
</li>
<li><p>重降低查询的性能，因此在产品环境中使用之前，应该对其进行全面测试）。 </p>
</li>
<li><p>许多DBMS禁止在视图查询中使用ORDER BY子句。 </p>
</li>
<li><p>有些DBMS要求对返回的所有列进行命名，如果列是计算字段，则需要使用别名（关于列别名的更多信息，请参阅第7课）。 </p>
</li>
<li><p>视图不能索引，也不能有关联的触发器或默认值。 </p>
</li>
<li><p>有些DBMS把视图作为只读的查询，这表示可以从视图检索数据，但不能将数据写回底层表。详情请参阅具体的DBMS文档。 </p>
</li>
<li><p>有些DBMS允许创建这样的视图，它不能进行导致行不再属于视图的插入或更新。例如有一个视图，只检索带有电子邮件地址的顾客。如 </p>
</li>
<li><p>果更新某个顾客，删除他的电子邮件地址，将使该顾客不再属于视图。这是默认行为，而且是允许的，但有的DBMS可能会防止这种情况 发生。</p>
</li>
</ul>
<h2 id="视图的使用"><a href="#视图的使用" class="headerlink" title="视图的使用"></a>视图的使用</h2><h3 id="创建和删除"><a href="#创建和删除" class="headerlink" title="创建和删除"></a>创建和删除</h3><p>视图用CREATE VIEW语句来创建</p>
<p>删除视图，可以使用DROP语句，其语法为DROP VIEW viewname。覆盖（或更新）视图，必须先删除它，然后再重新创建。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><ol>
<li><p>利用视图简化复杂的联结</p>
</li>
<li><p>用视图重新格式化检索出的数据</p>
</li>
<li><p>用视图过滤不想要的数据</p>
</li>
<li><p>使用视图与计算字段</p>
</li>
</ol>
<h1 id="19-存储过程"><a href="#19-存储过程" class="headerlink" title="19. 存储过程"></a>19. 存储过程</h1><p>可以创建存储过程。简单来说，存储过程就是为以后使用而保存的一条或多条SQL语句。可将其视为批文件，虽然它们的作用不仅限于批处理。</p>
<h2 id="是什么-1"><a href="#是什么-1" class="headerlink" title="是什么"></a>是什么</h2><h2 id="为什么-1"><a href="#为什么-1" class="headerlink" title="为什么"></a>为什么</h2><ul>
<li><p>通过把处理封装在一个易用的单元中，可以简化复杂的操作（如前面例子所述）。 </p>
</li>
<li><p>由于不要求反复建立一系列处理步骤，因而保证了数据的一致性。如果所有开发人员和应用程序都使用同一存储过程，则所使用的代码都是相同的。 </p>
</li>
<li><p>这一点的延伸就是防止错误。需要执行的步骤越多，出错的可能性就越大。防止错误保证了数据的一致性。 </p>
</li>
<li><p>简化对变动的管理。如果表名、列名或业务逻辑（或别的内容）有变化，那么只需要更改存储过程的代码。使用它的人员甚至不需要知道 这些变化。 </p>
</li>
<li><p>这一点的延伸就是安全性。通过存储过程限制对基础数据的访问，减少了数据讹误（无意识的或别的原因所导致的数据讹误）的机会。 因为存储过程通常以编译过的形式存储，所以DBMS处理命令的工作较少，提高了性能。 </p>
</li>
<li><p>存在一些只能用在单个请求中的SQL元素和特性，存储过程可以使用它们来编写功能更强更灵活的代码。 </p>
</li>
</ul>
<p>换句话说，使用存储过程有三个主要的好处，即简单、安全、高性能。显然，它们都很重要。不过，在将SQL代码转换为存储过程前，也必须 </p>
<p>知道它的一些缺陷。 </p>
<ul>
<li><p>不同DBMS中的存储过程语法有所不同。事实上，编写真正的可移植存储过程几乎是不可能的。不过，存储过程的自我调用（名字以及数 据如何传递）可以相对保持可移植。因此，如果需要移植到别的DBMS，至少客户端应用代码不需要变动。 </p>
</li>
<li><p>一般来说，编写存储过程比编写基本SQL语句复杂，需要更高的技能，更丰富的经验。因此，许多数据库管理员把限制存储过程的创建作 </p>
</li>
</ul>
<p>为安全措施（主要受上一条缺陷的影响）。</p>
<h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create procedure productpricing()</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT AVG(prod_price) AS priceaverage</span><br><span class="line">    FROM products;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>用CREATE PROCEDURE productpricing()语句定义。如果存储过程接受参数，它们将在()中列举出来。存储过程的代码位于BEGIN和END语句内，</p>
<p><strong>mysql命令行客户机的分隔符</strong></p>
<p>DELIMITER //告诉命令行实用程序使用//作为新的语句结束分隔符，</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL productpricing()</span><br></pre></td></tr></table></figure>

<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE productpricing;</span><br><span class="line">DROP PROCEDURE productpricing IF EXISTS;</span><br></pre></td></tr></table></figure>

<h2 id="使用参数"><a href="#使用参数" class="headerlink" title="使用参数"></a>使用参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create procedure productpricing(</span><br><span class="line">    OUT p1 DECIMAL(8, 2),</span><br><span class="line">    OUT ph DECIMAL(8, 2),</span><br><span class="line">    OUT pa DECIMAL(8, 2)</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT MIN(prod_price) INTO p1 FROM products;</span><br><span class="line">    SELECT MAX(prod_price) INTO ph FROM products;</span><br><span class="line">    SELECT AVG(prod_price) INTO pa FROM products</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<p>每个参数必须具有指定的类型，这里使用十进制值(DECIMAL 关键字)。关键字OUT指出相应的参数用来从存储过程传出一个值（返回给调用者）。MySQL支持IN（传递给存储过程）、OUT（从存储过程传出，如这里所用）和INOUT（对存储过程传入和传出）类型的参数。</p>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CALL productpricing(@procelow, @pricehigh, @priceAverage);</span><br><span class="line">SELECT @procelow;</span><br></pre></td></tr></table></figure>

<p><strong>变量名:</strong> 所有MySQL变量都必须以@开始。</p>
<h2 id="建立智能存储过程"><a href="#建立智能存储过程" class="headerlink" title="建立智能存储过程"></a>建立智能存储过程</h2><p>只有在存储过程内包含业务规则和智能处理时，它们的威力才真正显现出来。</p>
<p>用DECLARE语句定义了两个局部变量。DECLARE要求指定变量名和数据类型，它也支持可选的默认值.</p>
<p><strong>COMMENT关键字</strong> 本例子中的存储过程在CREATE PROCEDURE语<br>句中包含了一个COMMENT值。它不是必需的，但如果给出，将<br>在SHOW PROCEDURE STATUS的结果中显示。</p>
<h2 id="检查存储过程"><a href="#检查存储过程" class="headerlink" title="检查存储过程"></a>检查存储过程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 显示用来创建一个存储过程的CREATE语句</span><br><span class="line">SHOW CREATE PROCEDURE ordertotal;</span><br><span class="line"># 了获得包括何时、由谁创建等详细信息的存储过程列表</span><br><span class="line">SHOW STATUS PROCEDURE ordertotal;</span><br></pre></td></tr></table></figure>

<h1 id="20-管理事务处理"><a href="#20-管理事务处理" class="headerlink" title="20. 管理事务处理"></a>20. 管理事务处理</h1><h2 id="为什么-2"><a href="#为什么-2" class="headerlink" title="为什么"></a>为什么</h2><p>使用事务处理（transaction processing），通过确保成批的SQL操作要么完全执行，要么完全不执行，来维护数据库的完整</p>
<ul>
<li>事务（transaction）指一组SQL语句；</li>
<li>回退（rollback）指撤销指定SQL语句的过程；</li>
<li>提交（commit）指将未存储的SQL语句结果写入数据库表；</li>
<li>保留点（savepoint）指事务处理中设置的临时占位符（placeholder），可以对它发布回退（与回退整个事务处理不同）</li>
</ul>
<h2 id="控制事务处理"><a href="#控制事务处理" class="headerlink" title="控制事务处理"></a>控制事务处理</h2><p>管理事务处理的关键在于将SQL语句组分解为逻辑块，并明确规定数据何时应该回退，何时不应该回退。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 开始事务</span><br><span class="line">start transaction</span><br><span class="line"></span><br><span class="line"># 回退</span><br><span class="line">ROLLBACK</span><br><span class="line"></span><br><span class="line"># 提交</span><br><span class="line">COMMIT</span><br><span class="line"></span><br><span class="line"># 保留点, 部分回退</span><br><span class="line">SAVEPOINT point1;</span><br><span class="line">ROLLBACK TO point1</span><br></pre></td></tr></table></figure>

<p>ROLLBACK命令用来回退（撤销）MySQL语句</p>
<p>ROLLBACK** 只能在一个事务处理内使用（在执行一条STARTTRANSACTION命令之后）。</p>
<p>一般的MySQL语句都是直接针对数据库表执行和编写的。这就是所谓的隐含提交（implicit commit），即提交（写或保存）操作是自动进行的。</p>
<p>​    但是，在事务处理块中，提交不会隐含地进行。为进行明确的提交，使用COMMIT语句.</p>
<p><strong>隐含事务关闭 :</strong>当COMMIT或ROLLBACK语句执行后，事务会自动关闭（将来的更改会隐含提交）</p>
<p>保留点越多越好可以在SQL代码中设置任意多的保留点，越多越好。为什么呢？因为保留点越多，你就越能灵活地进行回退。</p>
<h1 id="21-使用游标"><a href="#21-使用游标" class="headerlink" title="21. 使用游标"></a>21. 使用游标</h1><p><strong>结果集（result set）</strong>SQL查询所检索出的结果。</p>
<h2 id="为什么-3"><a href="#为什么-3" class="headerlink" title="为什么"></a>为什么</h2><p>有时，需要在检索出来的行中前进或后退一行或多行，这就是游标的用途所在。</p>
<h2 id="是什么-2"><a href="#是什么-2" class="headerlink" title="是什么"></a>是什么</h2><p>游标（cursor）是一个存储在DBMS服务器上的数据库查询， 它不是一条SELECT语句，而是被该语句检索出来的结果集。</p>
<h2 id="选项和特性"><a href="#选项和特性" class="headerlink" title="选项和特性"></a>选项和特性</h2><ul>
<li><p>能够标记游标为只读，使数据能读取，但不能更新和删除。 </p>
</li>
<li><p>能控制可以执行的定向操作（向前、向后、第一、最后、绝对位置、相对位置等）。 </p>
</li>
<li><p>能标记某些列为可编辑的，某些列为不可编辑的。 </p>
</li>
<li><p>规定范围，使游标对创建它的特定请求（如存储过程）或对所有请求可访问。 </p>
</li>
<li><p>指示DBMS对检索出的数据（而不是指出表中活动数据）进行复制，使数据在游标打开和访问期间不变化。</p>
</li>
</ul>
<p><strong>说明：游标与基于Web的应用</strong></p>
<h2 id="使用游标"><a href="#使用游标" class="headerlink" title="使用游标"></a>使用游标</h2><p><strong>步骤：</strong></p>
<ol>
<li><p>在使用游标前，必须声明（定义）它。这个过程实际上没有检索数据，它只是定义要使用的SELECT语句和游标选项。 </p>
</li>
<li><p>一旦声明，就必须打开游标以供使用。这个过程用前面定义的SELECT语句把数据实际检索出来。 </p>
</li>
<li><p>对于填有数据的游标，根据需要取出（检索）各行。 </p>
</li>
<li><p>在结束游标使用时，必须关闭游标，可能的话，释放游标（有赖于具体的DBMS）。</p>
</li>
</ol>
<p>使用DECLARE语句创建游标</p>
<p><strong>创建</strong></p>
<p><strong>使用</strong></p>
<h1 id="22-高级SQL特性"><a href="#22-高级SQL特性" class="headerlink" title="22. 高级SQL特性"></a>22. 高级SQL特性</h1><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><h3 id="是什么-3"><a href="#是什么-3" class="headerlink" title="是什么"></a>是什么</h3><p><strong>约束（constraint）</strong> 管理如何插入或处理数据库数据的规则。</p>
<p>包括：主键、外键、唯一约束、检查约束</p>
<h3 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h3><p>满足条件：</p>
<ul>
<li><p>任意两行的主键值都不相同。 </p>
</li>
<li><p>每行都具有一个主键值（即列中不允许NULL值）。 </p>
</li>
<li><p>包含主键值的列从不修改或更新。（大多数DBMS不允许这么做，但如果你使用的DBMS允许这样做，好吧，千万别！） </p>
</li>
<li><p>主键值不能重用。如果从表中删除某一行，其主键值不分配给新行。</p>
</li>
</ul>
<p>指定列为主键： <strong>PRIMARY KEY</strong></p>
<h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><p>外键是表中的一列，其值必须列在另一表的主键中。外键是保证引用完整性的极其重要部分。</p>
<p>外键有助防止意外删除</p>
<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><p>主键和唯一约束区别：</p>
<ul>
<li>表可包含多个唯一约束，但每个表只允许一个主唯一约束列可包含NULL值。</li>
<li>唯一约束列可修改或更新。</li>
<li>唯一约束列的值可重复使用。与</li>
<li>主键不一样，唯一约束不能用来定义外键。</li>
</ul>
<h3 id="检查约束"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束</h3><p>检查约束用来保证一列（或一组列）中的数据满足一组指定的条件。检查约束的常见用途有以下几点。 </p>
<ul>
<li><p>检查最小或最大值。例如，防止0个物品的订单（即使0是合法的数）。 </p>
</li>
<li><p>指定范围。例如，保证发货日期大于等于今天的日期，但不超过今天起一年后的日期。 </p>
</li>
<li><p>只允许特定的值。例如，在性别字段中只允许M或F。</p>
</li>
</ul>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><p><strong>是什么：</strong>触发器是特殊的存储过程，它在特定的数据库活动发生时自动执行。</p>
<p>一般来说，约束的处理比触发器快，因此在可能的时候，应该尽量使用约束。</p>
<h2 id="数据库安全"><a href="#数据库安全" class="headerlink" title="数据库安全"></a>数据库安全</h2><ul>
<li><p>对数据库管理功能（创建表、更改或删除已存在的表等）的访问； </p>
</li>
<li><p>对特定数据库或表的访问； </p>
</li>
<li><p>访问的类型（只读、对特定列的访问等）； </p>
</li>
<li><p>仅通过视图或存储过程对表进行访问； </p>
</li>
<li><p>创建多层次的安全措施，从而允许多种基于登录的访问和控制； </p>
</li>
<li><p>限制管理用户账号的能力。</p>
</li>
</ul>
<h1 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h1><table>
<thead>
<tr>
<th>关键字</th>
<th>作用</th>
<th>附加说明</th>
</tr>
</thead>
<tbody><tr>
<td>SELECT</td>
<td>要返回的列或表达式</td>
<td></td>
</tr>
<tr>
<td>FROM</td>
<td>从中检索数据的表</td>
<td></td>
</tr>
<tr>
<td>WHERE</td>
<td>指定搜索条件进行过滤（行级过滤）</td>
<td>范围值检查：BETWEEN  xx AND xx<br/>指定条件范围：IN(xx, xx)<br/>否定其后条件：NOT</td>
</tr>
<tr>
<td>GROUP BY</td>
<td>分组</td>
<td>组级过滤：HAVING</td>
</tr>
<tr>
<td>ORDER BY</td>
<td>输出排序顺序</td>
<td>降序：DESC （DESCENDING）<br/>升序（默认）：ASC（ASCENDING）</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DISTINCT    distinct</td>
<td></td>
<td></td>
</tr>
<tr>
<td>IS NULL</td>
<td>非空检查</td>
<td></td>
</tr>
<tr>
<td>AND 、OR</td>
<td>逻辑操作符</td>
<td></td>
</tr>
<tr>
<td>LIKE</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ol>
<li><p><strong>distinct</strong></p>
<p>它指示数据库只返回不同的值。</p>
<blockquote>
<p>eg：SELECT DISTINCT vend_id FROM Products;</p>
</blockquote>
<p><strong>警告：不能部分使用 DISTINCT</strong><br>DISTINCT关键字作用于所有的列，不仅仅是跟在其后的那一列。例如，你指定SELECT DISTINCT vend_id, prod_price，除非指定的两列完<br>全相同，否则所有的行都会被检索出来。</p>
</li>
</ol>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/03/06/%E7%AE%97%E6%B3%95%E5%9B%BE%E8%A7%A3%E8%AF%BB%E5%90%8E%E6%84%9F/" rel="next" title="算法图解读后感">
                <i class="fa fa-chevron-left"></i> 算法图解读后感
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/05/09/%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E7%9A%84/" rel="prev" title="磁盘分区">
                磁盘分区 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lkg</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%20%7C%7C%20archive">
                
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/%20%7C%7C%20th">
                    
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/%20%7C%7C%20tags">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/lkgGitHub" title="GitHub &rarr; https://github.com/lkgGitHub" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://blog.csdn.net/lkgCSDN" title="CSDN &rarr; https://blog.csdn.net/lkgCSDN" rel="noopener" target="_blank"><i class="fa fa-fw fa-CSDN"></i>CSDN</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.cnblogs.com/lkgBlogs" title="博客园 &rarr; https://www.cnblogs.com/lkgBlogs" rel="noopener" target="_blank"><i class="fa fa-fw fa-博客园"></i>博客园</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="/627861816@qq.com" title="E-Mail &rarr; 627861816@qq.com"><i class="fa fa-fw fa-E-Mail"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">1. 数据库基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="nav-number">1.1.</span> <span class="nav-text">概念：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="nav-number">2.</span> <span class="nav-text">2. 检索数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="nav-number">3.</span> <span class="nav-text">3. 排序检索数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E5%A4%9A%E4%B8%AA%E5%88%97%E6%8E%92%E5%BA%8F"><span class="nav-number">3.1.</span> <span class="nav-text">按多个列排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%89%E5%88%97%E4%BD%8D%E7%BD%AE%E6%8E%92%E5%BA%8F"><span class="nav-number">3.2.</span> <span class="nav-text">按列位置排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E6%8E%92%E5%BA%8F%E6%96%B9%E5%90%91"><span class="nav-number">3.3.</span> <span class="nav-text">指定排序方向</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">4.</span> <span class="nav-text">4. 过滤数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#WHERE-%E5%AD%90%E5%8F%A5"><span class="nav-number">4.1.</span> <span class="nav-text">WHERE 子句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WHERE-%E5%AD%90%E5%8F%A5%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.2.</span> <span class="nav-text">WHERE 子句操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.2.1.</span> <span class="nav-text">复杂查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IN%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.2.2.</span> <span class="nav-text">IN操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NOT%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">4.2.3.</span> <span class="nav-text">NOT操作符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">5. 用通配符进行过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#LIKE%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">5.1.</span> <span class="nav-text">LIKE操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BE%E5%88%86%E5%8F%B7-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">5.1.1.</span> <span class="nav-text">百分号(%)通配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E5%88%92%E7%BA%BF-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">5.1.2.</span> <span class="nav-text">下划线(_)通配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%8B%AC%E5%8F%B7-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">5.1.3.</span> <span class="nav-text">方括号([ ])通配符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E7%9A%84%E6%8A%80%E5%B7%A7"><span class="nav-number">5.2.</span> <span class="nav-text">使用通配符的技巧</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5"><span class="nav-number">6.</span> <span class="nav-text">7.计算字段</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%BC%E6%8E%A5%E5%AD%97%E6%AE%B5"><span class="nav-number">6.1.</span> <span class="nav-text">拼接字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E7%AE%97%E6%95%B0%E8%AE%A1%E7%AE%97"><span class="nav-number">6.2.</span> <span class="nav-text">执行算数计算</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">7.</span> <span class="nav-text">8. 使用数据处理函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">7.1.</span> <span class="nav-text">常用的文本处理函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">7.2.</span> <span class="nav-text">数值处理函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E8%81%9A%E9%9B%86%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">9. 聚集函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#AVG%EF%BC%88%EF%BC%89"><span class="nav-number">8.1.</span> <span class="nav-text">AVG（）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#count"><span class="nav-number">8.2.</span> <span class="nav-text">count</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MAX-%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.</span> <span class="nav-text">MAX()函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MIN-%E5%87%BD%E6%95%B0"><span class="nav-number">8.4.</span> <span class="nav-text">MIN()函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SUM-%E5%87%BD%E6%95%B0"><span class="nav-number">8.5.</span> <span class="nav-text">SUM()函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE"><span class="nav-number">9.</span> <span class="nav-text">10. 分组数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%88%86%E7%BB%84"><span class="nav-number">9.1.</span> <span class="nav-text">过滤分组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="nav-number">9.2.</span> <span class="nav-text">分组和排序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-%E8%A7%86%E5%9B%BE"><span class="nav-number">10.</span> <span class="nav-text">18. 视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">10.1.</span> <span class="nav-text">是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88"><span class="nav-number">10.2.</span> <span class="nav-text">为什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E8%A7%84%E5%88%99%E5%92%8C%E9%99%90%E5%88%B6"><span class="nav-number">10.3.</span> <span class="nav-text">视图的规则和限制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">10.4.</span> <span class="nav-text">视图的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%A0%E9%99%A4"><span class="nav-number">10.4.1.</span> <span class="nav-text">创建和删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">10.5.</span> <span class="nav-text">作用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">11.</span> <span class="nav-text">19. 存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88-1"><span class="nav-number">11.1.</span> <span class="nav-text">是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-1"><span class="nav-number">11.2.</span> <span class="nav-text">为什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-number">11.3.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">11.4.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">11.5.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0"><span class="nav-number">11.6.</span> <span class="nav-text">使用参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-1"><span class="nav-number">11.6.1.</span> <span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E6%99%BA%E8%83%BD%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">11.7.</span> <span class="nav-text">建立智能存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">11.8.</span> <span class="nav-text">检查存储过程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#20-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">12.</span> <span class="nav-text">20. 管理事务处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-2"><span class="nav-number">12.1.</span> <span class="nav-text">为什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">12.2.</span> <span class="nav-text">控制事务处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#21-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87"><span class="nav-number">13.</span> <span class="nav-text">21. 使用游标</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-3"><span class="nav-number">13.1.</span> <span class="nav-text">为什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88-2"><span class="nav-number">13.2.</span> <span class="nav-text">是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E9%A1%B9%E5%92%8C%E7%89%B9%E6%80%A7"><span class="nav-number">13.3.</span> <span class="nav-text">选项和特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87"><span class="nav-number">13.4.</span> <span class="nav-text">使用游标</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#22-%E9%AB%98%E7%BA%A7SQL%E7%89%B9%E6%80%A7"><span class="nav-number">14.</span> <span class="nav-text">22. 高级SQL特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.1.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88-3"><span class="nav-number">14.1.1.</span> <span class="nav-text">是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE"><span class="nav-number">14.1.2.</span> <span class="nav-text">主键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%94%AE"><span class="nav-number">14.1.3.</span> <span class="nav-text">外键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.1.4.</span> <span class="nav-text">唯一约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="nav-number">14.1.5.</span> <span class="nav-text">检查约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">14.2.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">14.3.</span> <span class="nav-text">触发器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8"><span class="nav-number">14.4.</span> <span class="nav-text">数据库安全</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">15.</span> <span class="nav-text">关键字</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lkg</span>

  

  
</div>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
